# 图片水印工具

一个功能完整的图片水印应用程序，支持文本水印和图片水印，具有丰富的自定义选项和批量处理功能。

## 功能特性

### 1. 文件处理
- ✅ **图片导入**
  - 支持单张图片拖拽或文件选择器导入
  - 支持批量导入，可一次性选择多张图片或整个文件夹
  - 在界面上显示已导入图片的列表（缩略图和文件名）

- ✅ **支持格式**
  - 输入格式：JPEG, PNG, BMP, TIFF（PNG支持透明通道）
  - 输出格式：用户可选择输出为 JPEG 或 PNG

- ✅ **导出功能**
  - 用户可指定输出文件夹（默认禁止导出到原文件夹）
  - 提供导出文件命名规则选项：保留原文件名、添加前缀、添加后缀
  - JPEG格式提供图片质量调节滑块（0-100）
  - 导出时允许用户调整图片尺寸（按宽度、高度或百分比缩放）

### 2. 水印类型

- ✅ **文本水印**
  - 内容：用户可自定义输入任意文本
  - 字体：可选择系统已安装的字体、字号、粗体、斜体
  - 颜色：提供调色板让用户选择字体颜色
  - 透明度：可调节文本的透明度（0-100%）
  - 样式：可添加阴影或描边效果，增强在复杂背景下的可读性

- ✅ **图片水印**
  - 用户可从本地选择一张图片（如Logo）作为水印
  - 支持带透明通道的 PNG 图片
  - 缩放：可按比例或自由调整图片水印的大小
  - 透明度：可调节图片水印的整体透明度（0-100%）

### 3. 水印布局与样式

- ✅ **实时预览**：所有对水印的调整都在主预览窗口中实时显示效果
- ✅ **位置控制**
  - 预设位置：提供九宫格布局（四角、正中心）
  - 手动拖拽：用户可以直接在预览图上通过鼠标拖拽水印到任意位置
- ✅ **旋转功能**：提供滑块允许用户以任意角度旋转水印

### 4. 配置管理

- ✅ **水印模板**
  - 用户可以将当前的水印设置保存为模板
  - 用户可以加载、管理和删除已保存的模板
  - 程序启动时可自动加载上一次关闭时的设置

## 安装和运行

### 环境要求
- Python 3.7+
- 依赖包：见 `requirements.txt`

### 安装步骤

1. 克隆项目
```bash
git clone <repository-url>
cd ImageWatermarker
```

2. 安装依赖
```bash
pip install -r requirements.txt
```

3. 运行应用
```bash
python main_complete.py
```

## 项目结构

```
ImageWatermarker/
├── core/                   # 核心功能模块
│   ├── image_processor.py  # 图像处理
│   ├── watermark.py       # 水印处理
│   └── config_manager.py  # 配置管理
├── gui/                   # 图形界面模块
├── utils/                 # 工具模块
│   ├── drag_drop.py      # 拖拽功能
│   ├── thumbnail.py      # 缩略图管理
│   ├── file_naming.py    # 文件命名规则
│   ├── manual_positioning.py  # 手动定位
│   ├── rotation_control.py    # 旋转控制
│   ├── color_picker.py   # 颜色选择器
│   ├── font_selector.py  # 字体选择器
│   ├── text_effects.py   # 文本效果
│   ├── image_resize.py   # 图片尺寸调整
│   ├── watermark_scaling.py   # 水印缩放
│   └── template_manager.py    # 模板管理
├── templates/            # 模板存储目录
├── test_images/         # 测试图片
├── main_complete.py     # 完整版主程序
├── requirements.txt     # 依赖包列表
└── README.md           # 项目说明
```

## 使用说明

### 基本使用流程

1. **导入图片**
   - 点击"选择图片"或"选择文件夹"按钮
   - 或直接拖拽图片/文件夹到应用窗口

2. **设置水印**
   - 选择水印类型（文本或图片）
   - 配置水印参数（内容、字体、颜色、位置等）
   - 在右侧预览窗口查看实时效果

3. **调整位置**
   - 使用九宫格预设位置
   - 或在预览窗口中直接拖拽水印

4. **导出图片**
   - 选择输出文件夹
   - 配置导出设置（格式、质量、命名规则等）
   - 点击"批量导出"

### 高级功能

- **模板管理**：保存常用的水印设置为模板，方便重复使用
- **文本效果**：为文本水印添加阴影或描边效果
- **图片缩放**：调整输出图片的尺寸
- **水印缩放**：调整图片水印的大小

## 技术特性

- 基于 Python tkinter 的跨平台 GUI
- 使用 PIL/Pillow 进行图像处理
- 支持多种图片格式
- 实时预览功能
- 模块化设计，易于扩展

## 许可证

本项目采用 MIT 许可证。详见 LICENSE 文件。

## 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目。

## 更新日志

### v1.0.0
- 实现所有基础功能
- 支持文本和图片水印
- 实时预览和批量处理
- 模板管理系统
- 完整的用户界面